-- Create the users table
CREATE TABLE users (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    username TEXT NOT NULL UNIQUE,
    password TEXT NOT NULL
);

-- Create the tasks table
CREATE TABLE tasks (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    title TEXT NOT NULL,
    description TEXT,
    owner_id INTEGER NOT NULL,
    FOREIGN KEY (owner_id) REFERENCES users (id)
);

-- Create the task assignments table
CREATE TABLE task_assignments (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    task_id INTEGER NOT NULL,
    assignee_id INTEGER NOT NULL,
    status TEXT NOT NULL,
    FOREIGN KEY (task_id) REFERENCES tasks (id),
    FOREIGN KEY (assignee_id) REFERENCES users (id)
);

-- Insert some sample data
INSERT INTO users (username, password) VALUES ('user1', 'password1');
INSERT INTO users (username, password) VALUES ('user2', 'password2');

INSERT INTO tasks (title, description, owner_id) VALUES ('Task 1', 'This is task 1 description.', 1);
INSERT INTO tasks (title, description, owner_id) VALUES ('Task 2', 'This is task 2 description.', 1);

INSERT INTO task_assignments (task_id, assignee_id, status) VALUES (1, 2, 'in progress');
INSERT INTO task_assignments (task_id, assignee_id, status) VALUES (2, 2, 'not started');